# SonarCloud configuration
sonar.projectKey=artivisi_aplikasi-akunting
sonar.organization=artivisi

# Exclude Thymeleaf fragment files from HTML validation rules
# These files are not standalone HTML pages - they contain HTML snippets
# meant to be included in other templates via th:fragment
# Also exclude CSS files (Tailwind v4 uses @source which Sonar doesn't recognize)
# Fragment file patterns:
# - fragments/ folders (standard fragment location)
# - *-table.html files (HTMX partial tables)
# - *-widget.html files (dashboard widgets)
# - *-button.html files (button fragments)
# - *-tags.html files (tag fragments)
# - *-list.html files (list fragments)
# - *-row.html files (row fragments)
# - SQL migrations (PL/SQL rules are Oracle-specific, not applicable to PostgreSQL)
# - app.css (Tailwind v4 @source directive)
sonar.exclusions=**/fragments/**,**/accounts/fragments.html,**/app.css,**/frontend/src/app.css,**/*-table.html,**/*-widget.html,**/*-button.html,**/*-tags.html,**/*-list.html,**/*-row.html,**/db/migration/*.sql

# Source encoding
sonar.sourceEncoding=UTF-8

# Disable Oracle-specific PL/SQL rules for PostgreSQL migrations
# plsql:VarcharUsageCheck - VARCHAR2 is Oracle-specific, PostgreSQL uses VARCHAR
# plsql:S1192 - String duplication is acceptable in schema definitions for readability
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7,e8,e9,e10,e11,e12
sonar.issue.ignore.multicriteria.e1.ruleKey=plsql:VarcharUsageCheck
sonar.issue.ignore.multicriteria.e1.resourceKey=**/db/migration/*.sql
sonar.issue.ignore.multicriteria.e2.ruleKey=plsql:S1192
sonar.issue.ignore.multicriteria.e2.resourceKey=**/db/migration/*.sql

# S5778 false positive: AssertJ's assertThatThrownBy uses single method call in lambda
# but SonarCloud incorrectly flags it as having multiple invocations
sonar.issue.ignore.multicriteria.e3.ruleKey=java:S5778
sonar.issue.ignore.multicriteria.e3.resourceKey=**/src/test/**/*.java

# S5976: Parameterized tests suggestion - low priority style improvement
# Current tests are readable with explicit names; can be refactored later
sonar.issue.ignore.multicriteria.e4.ruleKey=java:S5976
sonar.issue.ignore.multicriteria.e4.resourceKey=**/src/test/**/*.java

# S5853: Assertions should be complete - test style preference
# Method calls in expected values are acceptable in test context
sonar.issue.ignore.multicriteria.e5.ruleKey=java:S5853
sonar.issue.ignore.multicriteria.e5.resourceKey=**/src/test/**/*.java

# S5841: Test emptiness before assertion predicate
# False positives when using isNotEmpty().allMatch() pattern correctly
sonar.issue.ignore.multicriteria.e6.ruleKey=java:S5841
sonar.issue.ignore.multicriteria.e6.resourceKey=**/src/test/**/*.java

# S1144: Unused private methods - test helpers detected correctly via dynamic invocation
sonar.issue.ignore.multicriteria.e7.ruleKey=java:S1144
sonar.issue.ignore.multicriteria.e7.resourceKey=**/src/test/**/*.java

# S4144: Duplicate code in tests - test setup/teardown often has similar patterns
# Extracting to helpers reduces readability in test context
sonar.issue.ignore.multicriteria.e8.ruleKey=java:S4144
sonar.issue.ignore.multicriteria.e8.resourceKey=**/src/test/**/*.java

# S5838: AssertJ improvement suggestions - style preference
# Current assertion patterns are clear and readable
sonar.issue.ignore.multicriteria.e9.ruleKey=java:S5838
sonar.issue.ignore.multicriteria.e9.resourceKey=**/src/test/**/*.java

# S1481: Unused local variable - false positive for try-with-resources
# Creating empty files (ZIP, etc.) requires resource declaration even when body is empty
sonar.issue.ignore.multicriteria.e10.ruleKey=java:S1481
sonar.issue.ignore.multicriteria.e10.resourceKey=**/src/test/**/*.java

# S2925: Thread.sleep in tests - required for device auth polling loops
# and other async operations where Awaitility would add unnecessary complexity
sonar.issue.ignore.multicriteria.e11.ruleKey=java:S2925
sonar.issue.ignore.multicriteria.e11.resourceKey=**/src/test/**/*.java

# S5961: Too many assertions - comprehensive integration tests intentionally
# verify multiple aspects in a single test method for end-to-end validation
sonar.issue.ignore.multicriteria.e12.ruleKey=java:S5961
sonar.issue.ignore.multicriteria.e12.resourceKey=**/src/test/**/*.java
