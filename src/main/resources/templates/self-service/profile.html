<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layouts/main}"
      lang="id">
<head>
    <title>Profil Saya</title>
</head>
<body>
    <h1 id="page-title" layout:fragment="page-title">Profil Saya</h1>

    <div layout:fragment="content" class="space-y-6">
        <!-- Messages -->
        <div th:if="${success}" class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg">
            <span th:text="${success}">Sukses</span>
        </div>

        <!-- No Employee Linked -->
        <div th:if="${noEmployee}" class="bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded-lg">
            <p>Akun Anda belum terhubung dengan data karyawan. Silakan hubungi administrator.</p>
        </div>

        <div th:unless="${noEmployee}" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Personal Info Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Informasi Pribadi</h3>
                    <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600">Read Only</span>
                </div>
                <dl class="space-y-3">
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">NIK Karyawan</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.employeeId}">EMP001</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Nama Lengkap</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.name}">Nama Karyawan</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Email</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.email ?: '-'}">email@example.com</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">NIK KTP</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.nikKtp ?: '-'}">1234567890123456</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">NPWP</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.npwp ?: '-'}">00.000.000.0-000.000</dd>
                    </div>
                </dl>
            </div>

            <!-- Employment Info Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Informasi Kepegawaian</h3>
                    <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600">Read Only</span>
                </div>
                <dl class="space-y-3">
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Jabatan</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.jobTitle ?: '-'}">Software Developer</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Departemen</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.department ?: '-'}">Engineering</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Tipe Kepegawaian</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.employmentType.name()}">PERMANENT</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Tanggal Mulai Kerja</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${#temporals.format(employee.hireDate, 'd MMMM yyyy')}">1 Januari 2020</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Status PTKP</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.ptkpStatus.name()}">TK/0</dd>
                    </div>
                </dl>
            </div>

            <!-- Contact Info Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Kontak</h3>
                    <a sec:authorize="hasAuthority('OWN_PROFILE_EDIT')"
                       th:href="@{/self-service/profile/edit}"
                       class="text-sm text-blue-600 hover:text-blue-800">Edit</a>
                </div>
                <dl class="space-y-3">
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Telepon</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.phone ?: '-'}">08123456789</dd>
                    </div>
                    <div>
                        <dt class="text-sm text-gray-500 mb-1">Alamat</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.address ?: '-'}">Jl. Contoh No. 123</dd>
                    </div>
                </dl>
            </div>

            <!-- Bank Info Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Rekening Bank</h3>
                    <a sec:authorize="hasAuthority('OWN_PROFILE_EDIT')"
                       th:href="@{/self-service/profile/edit}"
                       class="text-sm text-blue-600 hover:text-blue-800">Edit</a>
                </div>
                <dl class="space-y-3">
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Nama Bank</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.bankName ?: '-'}">Bank BCA</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Nomor Rekening</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.bankAccountNumber ?: '-'}">1234567890</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">Nama Pemilik Rekening</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.bankAccountName ?: '-'}">Nama Karyawan</dd>
                    </div>
                </dl>
            </div>

            <!-- BPJS Info Card -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 lg:col-span-2">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">BPJS</h3>
                    <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-600">Read Only</span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">BPJS Kesehatan</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.bpjsKesehatanNumber ?: '-'}">0001234567890</dd>
                    </div>
                    <div class="flex justify-between">
                        <dt class="text-sm text-gray-500">BPJS Ketenagakerjaan</dt>
                        <dd class="text-sm font-medium text-gray-900" th:text="${employee.bpjsKetenagakerjaanNumber ?: '-'}">0001234567890</dd>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
