<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main}"
      lang="id">
<head>
    <title>Bagan Akun</title>
</head>
<body>
    <h1 layout:fragment="page-title" id="page-title">Bagan Akun</h1>

    <div layout:fragment="content" id="accounts-list-content" class="h-full flex flex-col">
        <!-- Success Message -->
        <div th:if="${successMessage}" class="mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg">
            <span th:text="${successMessage}">Success message</span>
        </div>

        <!-- Header Actions -->
        <div class="flex items-center justify-between mb-4 flex-shrink-0">
            <div class="flex items-center space-x-2">
                <span class="text-sm text-gray-600">
                    Total: <span th:text="${#lists.size(accounts)}" class="font-medium">0</span> akun utama
                </span>
            </div>
            <a id="btn-tambah-akun" th:href="@{/accounts/new}" class="inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
                Tambah Akun
            </a>
        </div>

        <!-- Accounts Tree -->
        <div class="flex-1 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden flex flex-col min-h-0">
            <!-- Table Header -->
            <div class="grid grid-cols-12 gap-4 px-4 py-3 bg-gray-50 border-b border-gray-200 text-xs font-semibold text-gray-600 uppercase tracking-wider flex-shrink-0">
                <div class="col-span-1">Kode</div>
                <div class="col-span-5">Nama Akun</div>
                <div class="col-span-2">Tipe</div>
                <div class="col-span-2">Saldo Normal</div>
                <div class="col-span-2 text-center">Aksi</div>
            </div>

            <!-- Scrollable Content -->
            <div id="accounts-table" class="flex-1 overflow-y-auto divide-y divide-gray-100">
                <!-- Empty State -->
                <div th:if="${#lists.isEmpty(accounts)}" class="p-8 text-center text-gray-500">
                    <svg class="w-12 h-12 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <p class="text-lg font-medium">Belum ada akun</p>
                    <p class="mt-1">Mulai dengan menambahkan akun pertama Anda</p>
                    <a th:href="@{/accounts/new}" class="inline-flex items-center mt-4 px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700">
                        Tambah Akun
                    </a>
                </div>

                <!-- Root Accounts -->
                <th:block th:each="account : ${accounts}">
                    <div th:replace="~{accounts/fragments :: accountRow(account=${account}, level=0)}"></div>
                </th:block>
            </div>
        </div>
    </div>
</body>
</html>
