spring.application.name=accounting-finance

server.port=10000

# Database connection with SSL
# sslmode=require ensures encrypted connection
# Run docker/postgres/ssl/generate-certs.sh before starting the database
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:12345/accountingdb?sslmode=require}
spring.datasource.username=${DATABASE_USERNAME:accounting}
spring.datasource.password=${DATABASE_PASSWORD:}

# JPA/Hibernate configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Jackson JSON configuration
spring.jackson.time-zone=Asia/Jakarta

# Thymeleaf configuration
spring.thymeleaf.cache=false

# Logging
#logging.level.org.hibernate.SQL=DEBUG
#logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Suppress default ERROR logging for authentication service exceptions
# (e.g., account lockout). Our AuthenticationEventListener handles these
# with appropriate log levels (WARN for lockout, ERROR for unexpected errors)
logging.level.org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter=OFF

# Document storage configuration
app.storage.documents.path=data/documents
app.storage.documents.max-file-size=10485760
app.storage.documents.allowed-types=image/jpeg,image/png,image/gif,application/pdf

# Telegram Bot configuration
telegram.bot.enabled=${TELEGRAM_BOT_ENABLED:false}
telegram.bot.token=${TELEGRAM_BOT_TOKEN:}
telegram.bot.username=${TELEGRAM_BOT_USERNAME:}
telegram.bot.webhook.url=${TELEGRAM_WEBHOOK_URL:}
telegram.bot.webhook.secret-token=${TELEGRAM_WEBHOOK_SECRET:}

# Google Cloud Vision configuration
google.cloud.vision.enabled=${GOOGLE_CLOUD_VISION_ENABLED:false}
google.cloud.vision.credentials-path=${GOOGLE_APPLICATION_CREDENTIALS:}

# Field-level encryption for PII (AES-256-GCM)
# Set APP_ENCRYPTION_KEY env var. Generate with: openssl rand -base64 32
app.encryption.key=${APP_ENCRYPTION_KEY:}

# Session security
server.servlet.session.timeout=15m
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# Error handling (hide sensitive information)
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-exception=false
server.error.include-binding-errors=never
# Transaction API Configuration
transaction.api.enabled=true
transaction.api.require-auth=false

# Rate limiting (future implementation)
# transaction.api.rate-limit.draft-creation=10/minute
# transaction.api.rate-limit.approval=30/minute
